
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Harmonization of data &#8212; socio4health</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/harmonization';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to create a raw dictionary for data harmonization" href="../dictionary.html" />
    <link rel="prev" title="Extraction of Colombia, Brazil and Peru online data" href="extractor.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/image.png" class="logo__image only-light" alt=""/>
    <img src="" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">socio4health</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../user_guide.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../getting_started.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../API_reference.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../examples.html">
    Examples
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/harmonize-tools/socio4health" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../user_guide.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../getting_started.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../API_reference.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../examples.html">
    Examples
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/harmonize-tools/socio4health" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../API_reference.html">API Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.Extractor.html">socio4health.Extractor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.extractor.s4h_get_default_data_dir.html">socio4health.extractor.s4h_get_default_data_dir</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.Extractor.s4h_extract.html">socio4health.Extractor.s4h_extract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.Extractor.s4h_delete_download_folder.html">socio4health.Extractor.s4h_delete_download_folder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.Harmonizer.html">socio4health.Harmonizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.Harmonizer.s4h_vertical_merge.html">socio4health.Harmonizer.s4h_vertical_merge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.Harmonizer.s4h_get_available_columns.html">socio4health.Harmonizer.s4h_get_available_columns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.Harmonizer.s4h_harmonize_dataframes.html">socio4health.Harmonizer.s4h_harmonize_dataframes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.Harmonizer.s4h_data_selector.html">socio4health.Harmonizer.s4h_data_selector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.Harmonizer.s4h_compare_with_dict.html">socio4health.Harmonizer.s4h_compare_with_dict</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.Harmonizer.s4h_join_data.html">socio4health.Harmonizer.s4h_join_data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.utils.extractor_utils.compressed2files.html">socio4health.utils.extractor_utils.compressed2files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.utils.extractor_utils.download_request.html">socio4health.utils.extractor_utils.download_request</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.utils.extractor_utils.s4h_parse_fwf_dict.html">socio4health.utils.extractor_utils.s4h_parse_fwf_dict</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.utils.extractor_utils.run_standard_spider.html">socio4health.utils.extractor_utils.run_standard_spider</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.utils.harmonizer_utils.s4h_classify_rows.html">socio4health.utils.harmonizer_utils.s4h_classify_rows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.utils.harmonizer_utils.s4h_get_classifier.html">socio4health.utils.harmonizer_utils.s4h_get_classifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.utils.harmonizer_utils.s4h_standardize_dict.html">socio4health.utils.harmonizer_utils.s4h_standardize_dict</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.utils.harmonizer_utils.s4h_translate_column.html">socio4health.utils.harmonizer_utils.s4h_translate_column</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.utils.standard_spider.StandardSpider.html">socio4health.utils.standard_spider.StandardSpider</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.utils.standard_spider.StandardSpider.parse.html">socio4health.utils.standard_spider.StandardSpider.parse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.enums.data_info_enum.html">socio4health.enums.data_info_enum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.enums.data_info_enum.BraColspecsEnum.html">socio4health.enums.data_info_enum.BraColspecsEnum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.enums.data_info_enum.CountryEnum.html">socio4health.enums.data_info_enum.CountryEnum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.enums.data_info_enum.NameEnum.html">socio4health.enums.data_info_enum.NameEnum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../socio4health.enums.dict_enum.ColumnMappingEnum.html">socio4health.enums.dict_enum.ColumnMappingEnum</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../examples.html">Examples</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../user_interface.html">How to use socio4health GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="extractor.html">Extraction of Colombia, Brazil and Peru online data</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Harmonization of data (Brazil)</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../dictionary.html">How to create a raw dictionary for data harmonization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="example_colombia.html">Hands-on with socio4health: socioeconomic and demographic variables on dengue incidence in Colombia</a></li>
<li class="toctree-l2"><a class="reference internal" href="example_brazil.html">Hands-on with socio4health: effects of hydrometeorological hazards and urbanization on dengue risk in Brazil</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../user_guide.html" class="nav-link">User Guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="../examples.html" class="nav-link">Examples</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Harmonization of data</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <img src="https://raw.githubusercontent.com/harmonize-tools/socio4health/main/docs/source/_static/image.png" alt="image info" height="100" width="100"/>
<section id="harmonization-of-data">
<h1>Harmonization of data<a class="headerlink" href="#harmonization-of-data" title="Link to this heading">#</a></h1>
<p><strong>Run the tutorial via free cloud platforms:</strong> <a class="reference external" href="https://github.com/harmonize-tools/socio4health/blob/main/docs/source/notebooks/extractor.ipynb"><img alt="badge" src="https://img.shields.io/badge/launch-binder-E66581.svg?logo=data:image/png;base64,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" /></a> <a target="_blank" href="https://colab.research.google.com/github/harmonize-tools/socio4health/blob/main/docs/source/notebooks/extractor.ipynb">
<img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/>
</a></p>
<p>This notebook provides you with a tutorial on how to <strong>process sociodemographic and economic data</strong> from online data sources from  <strong>Brazil</strong>. This tutorial assumes you have an <strong>intermediate</strong> or <strong>advanced</strong> understanding of <strong>Python</strong> and data manipulation.</p>
<section id="setting-up-the-enviornment">
<h2>Setting up the enviornment<a class="headerlink" href="#setting-up-the-enviornment" title="Link to this heading">#</a></h2>
<p>To run this notebook, you need to have the following prerequisites:</p>
<ul class="simple">
<li><p><strong>Python 3.10+</strong></p></li>
</ul>
<p>Additionally, you need to install the <code class="docutils literal notranslate"><span class="pre">socio4health</span></code> and <code class="docutils literal notranslate"><span class="pre">pandas</span></code> package, which can be done using <code class="docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>!pip install socio4health pandas ipywidgets -q
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[notice] A new release of pip is available: 25.1.1 -&gt; 25.2
[notice] To update, run: python.exe -m pip install --upgrade pip
</pre></div>
</div>
</div>
</div>
<p>In case you want to run this notebook in <strong>Google Colab</strong>, you also need to run the following command to use your files stored in <strong>Google Drive</strong>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>from google.colab import drive
drive.mount(&#39;/content/drive&#39;)
</pre></div>
</div>
</div>
</div>
</section>
<section id="import-libraries">
<h2>Import Libraries<a class="headerlink" href="#import-libraries" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>import pandas as pd
from socio4health import Extractor
from socio4health.enums.data_info_enum import BraColnamesEnum, BraColspecsEnum
from socio4health.harmonizer import Harmonizer
from socio4health.utils import harmonizer_utils
import tqdm as tqdm
</pre></div>
</div>
</div>
</div>
</section>
<section id="extracting-data-from-brazil">
<h2>Extracting data from Brazil<a class="headerlink" href="#extracting-data-from-brazil" title="Link to this heading">#</a></h2>
<p>In this example, we will extract the Brazilian National Continuous Household Sample Survey (<strong>PNADC</strong>) for the year 2024 from the Brazilian Institute of Geography and Statistics (<strong>IBGE</strong>) website.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>bra_online_extractor = Extractor(input_path=&quot;https://ftp.ibge.gov.br/Trabalho_e_Rendimento/Pesquisa_Nacional_por_Amostra_de_Domicilios_continua/Trimestral/Microdados/2024/&quot;, down_ext=[&#39;.txt&#39;,&#39;.zip&#39;], is_fwf=True, colnames=BraColnamesEnum.PNADC.value, colspecs=BraColspecsEnum.PNADC.value, output_path=&quot;../data&quot;, depth=0)
</pre></div>
</div>
</div>
</div>
</section>
<section id="providing-the-raw-dictionary">
<h2>Providing the raw dictionary<a class="headerlink" href="#providing-the-raw-dictionary" title="Link to this heading">#</a></h2>
<p>We need to provide a <strong>raw dictionary</strong> to the <strong>harmonizer</strong> that contains the column names and their corresponding data types. This is necessary for the harmonization process, as it allows the harmonizer to understand the structure of the data. To know more about how to construct the raw dictionary, you can check the <a class="reference external" href="https://harmonize-tools.github.io/socio4health/dictionary.html">documentation</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>raw_dict = pd.read_excel(&#39;raw_dictionary.xlsx&#39;)
</pre></div>
</div>
</div>
</div>
<p>The raw dictionary is then standardized using the <code class="docutils literal notranslate"><span class="pre">s4h_standardize_dict</span></code> method, which ensures that the dictionary is in a consistent format, making it easier to work with during the harmonization process.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>dic = harmonizer_utils.s4h_standardize_dict(raw_dict)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\isabe\PycharmProjects\socio4health\src\socio4health\utils\harmonizer_utils.py:81: FutureWarning: DataFrameGroupBy.apply operated on the grouping columns. This behavior is deprecated, and in a future version of pandas the grouping columns will be excluded from the operation. Either pass `include_groups=False` to exclude the groupings or explicitly select the grouping columns after groupby to silence this warning.
  .apply(_process_group, include_groups=True)\
</pre></div>
</div>
</div>
</div>
<p>Additionally, the content of columns of the dictionary can be translated  into English using <code class="docutils literal notranslate"><span class="pre">s4h_translate_column</span></code> function from <code class="docutils literal notranslate"><span class="pre">s4h_harmonizer_utils</span></code> module. Translation is performed for facilitate the understanding and processing of the data.</p>
<div style="border-left: 4px solid #e74c3c; background: #fdecea; color: #222; padding: 0.5em 1em; margin: 1em 0; display: flex; align-items: center;">
  <span style="font-size: 20px; margin-right: 10px;">⚠️</span>
  <div>
    <strong>Warning:</strong> <code>s4h_translate_column</code> method may take some time depending on the <strong>size</strong> of the dictionary and the <strong> number of columns </strong> to be translated. It is recommended to use this method <strong> only </strong> if you need the content of the columns in English for further processing or analysis.
  </div>
</div><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>dic = harmonizer_utils.s4h_translate_column(dic, &quot;question&quot;, language=&quot;en&quot;)
dic = harmonizer_utils.s4h_translate_column(dic, &quot;description&quot;, language=&quot;en&quot;)
dic = harmonizer_utils.s4h_translate_column(dic, &quot;possible_answers&quot;, language=&quot;en&quot;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>question translated
description translated
possible_answers translated
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>dic
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>variable_name</th>
      <th>No</th>
      <th>question</th>
      <th>value</th>
      <th>description</th>
      <th>possible_answers</th>
      <th>question_en</th>
      <th>description_en</th>
      <th>possible_answers_en</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>V3012</td>
      <td>NaN</td>
      <td>concluiu com aprovação, pelo menos a primeira...</td>
      <td>1; 2; 3</td>
      <td>não aplicável</td>
      <td>concluiu; não concluiu; curso não classificado...</td>
      <td>Completed with approval, at least the first se...</td>
      <td>not applicable</td>
      <td>concluded; did not conclude; Course not classi...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>V3014</td>
      <td>NaN</td>
      <td>concluiu este curso que frequentou anteriormente</td>
      <td>1; 2</td>
      <td>não aplicável</td>
      <td>sim; não</td>
      <td>concluded this course that he attended earlier</td>
      <td>not applicable</td>
      <td>Yes; no</td>
    </tr>
    <tr>
      <th>2</th>
      <td>V3013B</td>
      <td>NaN</td>
      <td>concluiu os anos iniciais deste curso que fre...</td>
      <td>1; 2</td>
      <td>não aplicável</td>
      <td>sim; não</td>
      <td>Did you complete the early years of this cours...</td>
      <td>not applicable</td>
      <td>Yes; no</td>
    </tr>
    <tr>
      <th>3</th>
      <td>V4021</td>
      <td>NaN</td>
      <td>exercia normalmente o trabalho em estabelecim...</td>
      <td>1; 2</td>
      <td>não aplicável</td>
      <td>sim; não</td>
      <td>Did you usually work in establishing this busi...</td>
      <td>not applicable</td>
      <td>Yes; no</td>
    </tr>
    <tr>
      <th>4</th>
      <td>V3002</td>
      <td>NaN</td>
      <td>frequenta escola?</td>
      <td>1; 2</td>
      <td>não aplicável</td>
      <td>sim; não</td>
      <td>attend school?</td>
      <td>not applicable</td>
      <td>Yes; no</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>415</th>
      <td>V405812</td>
      <td>NaN</td>
      <td>valor em dinheiro do rendimento mensal que rec...</td>
      <td>valor em reais</td>
      <td>não aplicável</td>
      <td>r$</td>
      <td>cash value of the monthly income that normally...</td>
      <td>not applicable</td>
      <td>r$</td>
    </tr>
    <tr>
      <th>416</th>
      <td>V405822</td>
      <td>NaN</td>
      <td>valor estimado do produtos e mercadorias que r...</td>
      <td>valor em reais</td>
      <td>não aplicável</td>
      <td>r$</td>
      <td>Estimated value of the products and goods that...</td>
      <td>not applicable</td>
      <td>r$</td>
    </tr>
    <tr>
      <th>417</th>
      <td>V405922</td>
      <td>NaN</td>
      <td>valor estimado do produtos e mercadorias que r...</td>
      <td>valor em reais</td>
      <td>não aplicável</td>
      <td>r$</td>
      <td>estimated value of products and goods that nor...</td>
      <td>not applicable</td>
      <td>r$</td>
    </tr>
    <tr>
      <th>418</th>
      <td>V405022</td>
      <td>NaN</td>
      <td>valor estimado dos produtos e mercadorias que ...</td>
      <td>valor em reais</td>
      <td>não aplicável</td>
      <td>r$</td>
      <td>estimated value of the products and goods that...</td>
      <td>not applicable</td>
      <td>r$</td>
    </tr>
    <tr>
      <th>419</th>
      <td>V405122</td>
      <td>NaN</td>
      <td>valor estimado dos produtos e mercadorias que ...</td>
      <td>valor em reais</td>
      <td>não aplicável</td>
      <td>r$</td>
      <td>estimated value of the products and goods I re...</td>
      <td>not applicable</td>
      <td>r$</td>
    </tr>
  </tbody>
</table>
<p>420 rows × 9 columns</p>
</div></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">s4h_classify_rows</span></code> method is then used to classify the rows of the standardized dictionary based on the content of the specified columns. This classification helps in organizing the data and making it easier to work with during the harmonization process. The <code class="docutils literal notranslate"><span class="pre">MODEL_PATH</span></code> parameter specifies the path to a pre-trained model that is used for classification. You can provide your own model or use the default one provided in the <code class="docutils literal notranslate"><span class="pre">files</span></code> folder. The model is a <strong>fine-tuned BERT model</strong> for text classification. You can find more details about the model in the <a class="reference external" href="https://harmonize-tools.github.io/socio4health/socio4health.utils.harmonizer_utils.classify_rows.html#socio4health.utils.harmonizer_utils.classify_rows">documentation</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>dic = harmonizer_utils.s4h_classify_rows(dic, &quot;question_en&quot;, &quot;description_en&quot;, &quot;possible_answers_en&quot;,
                                     new_column_name=&quot;category&quot;,
                                     MODEL_PATH=&quot;files/bert_finetuned_classifier&quot;)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Device set to use cpu
</pre></div>
</div>
</div>
</div>
</section>
<section id="extracting-the-data">
<h2>Extracting the data<a class="headerlink" href="#extracting-the-data" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">extract</span></code> method of the <code class="docutils literal notranslate"><span class="pre">Extractor</span></code> class is used retrieve the data from the specified input path. It returns a list of dataframes, each dataframe corresponding to a file extracted from the path.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>dfs = bra_online_extractor.s4h_extract()
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-09-09 17:08:03,445 - INFO - ----------------------
2025-09-09 17:08:03,453 - INFO - Starting data extraction...
2025-09-09 17:08:03,456 - INFO - Extracting data in online mode...
2025-09-09 17:08:03,459 - INFO - Scraping URL: https://ftp.ibge.gov.br/Trabalho_e_Rendimento/Pesquisa_Nacional_por_Amostra_de_Domicilios_continua/Trimestral/Microdados/2024/ with depth 0
2025-09-09 17:08:13,576 - INFO - Spider completed successfully for URL: https://ftp.ibge.gov.br/Trabalho_e_Rendimento/Pesquisa_Nacional_por_Amostra_de_Domicilios_continua/Trimestral/Microdados/2024/
2025-09-09 17:08:13,580 - INFO - Downloading files to: ../data
Downloading files:   0%|          | 0/4 [00:00&lt;?, ?it/s]2025-09-09 17:08:27,760 - INFO - Successfully downloaded: PNADC_012024_20250815.zip
Downloading files:  25%|██▌       | 1/4 [00:14&lt;00:42, 14.13s/it]2025-09-09 17:08:41,771 - INFO - Successfully downloaded: PNADC_022024_20250815.zip
Downloading files:  50%|█████     | 2/4 [00:28&lt;00:28, 14.06s/it]2025-09-09 17:08:54,977 - INFO - Successfully downloaded: PNADC_032024_20250815.zip
Downloading files:  75%|███████▌  | 3/4 [00:41&lt;00:13, 13.67s/it]2025-09-09 17:09:07,862 - INFO - Successfully downloaded: PNADC_042024_20250815.zip
Downloading files: 100%|██████████| 4/4 [00:54&lt;00:00, 13.56s/it]
2025-09-09 17:09:07,868 - INFO - Processing (depth 0): PNADC_012024_20250815.zip
2025-09-09 17:10:00,060 - INFO - Extracted: a7db871d_PNADC_012024.txt
2025-09-09 17:10:00,107 - INFO - Processing (depth 0): PNADC_022024_20250815.zip
2025-09-09 17:10:21,652 - INFO - Extracted: 946bef7f_PNADC_022024.txt
2025-09-09 17:10:21,654 - INFO - Processing (depth 0): PNADC_032024_20250815.zip
2025-09-09 17:10:45,326 - INFO - Extracted: c8ebcb57_PNADC_032024.txt
2025-09-09 17:10:45,328 - INFO - Processing (depth 0): PNADC_042024_20250815.zip
2025-09-09 17:11:37,864 - INFO - Extracted: c1bffc2a_PNADC_042024.txt
Processing files: 100%|██████████| 4/4 [13:27&lt;00:00, 201.91s/it]
2025-09-09 17:25:05,504 - INFO - Successfully processed 4/4 files
2025-09-09 17:25:05,516 - INFO - Extraction completed successfully.
</pre></div>
</div>
</div>
</div>
</section>
<section id="harmonizing-the-data">
<h2>Harmonizing the data<a class="headerlink" href="#harmonizing-the-data" title="Link to this heading">#</a></h2>
<p>First, we need to create an instance of the <code class="docutils literal notranslate"><span class="pre">Harmonizer</span></code> class.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>har = Harmonizer()
</pre></div>
</div>
</div>
</div>
<p>After the dictionary is standardized and translated, it can be used to harmonize the data. For this, set the <code class="docutils literal notranslate"><span class="pre">dict_df</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">Harmonizer</span></code> instance to the standardized dictionary. This allows the harmonizer to use the information from the dictionary to process the dataframes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>har.dict_df = dic
</pre></div>
</div>
</div>
</div>
<p>Next, we can set the parameters for the harmonization process. The <code class="docutils literal notranslate"><span class="pre">similarity_threshold</span></code> parameter is used to set the threshold for the similarity among column names. The <code class="docutils literal notranslate"><span class="pre">nan_threshold</span></code> parameter is used to set the threshold for the number of <code class="docutils literal notranslate"><span class="pre">NaN</span></code> values allowed in a column. If a column has more <code class="docutils literal notranslate"><span class="pre">NaN</span></code> values than the specified threshold, it will be dropped from the final dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>har.similarity_threshold = 0.9
har.nan_threshold = 1
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">s4h_vertical_merge</span></code> method merges dataframes <strong>vertically</strong>. This means the data frames will be concatenated along the rows and aligned if their column names meet the previously set similarity threshold. The available columns can be obtained using the <code class="docutils literal notranslate"><span class="pre">s4h_get_available_columns</span></code> method, which returns a list of column names present in all dataframes after vertical merging.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>dfs = har.s4h_vertical_merge(dfs)
available_columns = har.s4h_get_available_columns(dfs)

available_columns
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Grouping DataFrames: 100%|██████████| 4/4 [00:00&lt;00:00, 10.89it/s]
Merging groups: 100%|██████████| 1/1 [00:00&lt;00:00,  1.80it/s]
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;Ano&#39;,
 &#39;Capital&#39;,
 &#39;Estrato&#39;,
 &#39;RM_RIDE&#39;,
 &#39;Trimestre&#39;,
 &#39;UF&#39;,
 &#39;UPA&#39;,
 &#39;V1008&#39;,
 &#39;V1014&#39;,
 &#39;V1016&#39;,
 &#39;V1022&#39;,
 &#39;V1023&#39;,
 &#39;V1027&#39;,
 &#39;V1028&#39;,
 &#39;V1028001&#39;,
 &#39;V1028002&#39;,
 &#39;V1028003&#39;,
 &#39;V1028004&#39;,
 &#39;V1028005&#39;,
 &#39;V1028006&#39;,
 &#39;V1028007&#39;,
 &#39;V1028008&#39;,
 &#39;V1028009&#39;,
 &#39;V1028010&#39;,
 &#39;V1028011&#39;,
 &#39;V1028012&#39;,
 &#39;V1028013&#39;,
 &#39;V1028014&#39;,
 &#39;V1028015&#39;,
 &#39;V1028016&#39;,
 &#39;V1028017&#39;,
 &#39;V1028018&#39;,
 &#39;V1028019&#39;,
 &#39;V1028020&#39;,
 &#39;V1028021&#39;,
 &#39;V1028022&#39;,
 &#39;V1028023&#39;,
 &#39;V1028024&#39;,
 &#39;V1028025&#39;,
 &#39;V1028026&#39;,
 &#39;V1028027&#39;,
 &#39;V1028028&#39;,
 &#39;V1028029&#39;,
 &#39;V1028030&#39;,
 &#39;V1028031&#39;,
 &#39;V1028032&#39;,
 &#39;V1028033&#39;,
 &#39;V1028034&#39;,
 &#39;V1028035&#39;,
 &#39;V1028036&#39;,
 &#39;V1028037&#39;,
 &#39;V1028038&#39;,
 &#39;V1028039&#39;,
 &#39;V1028040&#39;,
 &#39;V1028041&#39;,
 &#39;V1028042&#39;,
 &#39;V1028043&#39;,
 &#39;V1028044&#39;,
 &#39;V1028045&#39;,
 &#39;V1028046&#39;,
 &#39;V1028047&#39;,
 &#39;V1028048&#39;,
 &#39;V1028049&#39;,
 &#39;V1028050&#39;,
 &#39;V1028051&#39;,
 &#39;V1028052&#39;,
 &#39;V1028053&#39;,
 &#39;V1028054&#39;,
 &#39;V1028055&#39;,
 &#39;V1028056&#39;,
 &#39;V1028057&#39;,
 &#39;V1028058&#39;,
 &#39;V1028059&#39;,
 &#39;V1028060&#39;,
 &#39;V1028061&#39;,
 &#39;V1028062&#39;,
 &#39;V1028063&#39;,
 &#39;V1028064&#39;,
 &#39;V1028065&#39;,
 &#39;V1028066&#39;,
 &#39;V1028067&#39;,
 &#39;V1028068&#39;,
 &#39;V1028069&#39;,
 &#39;V1028070&#39;,
 &#39;V1028071&#39;,
 &#39;V1028072&#39;,
 &#39;V1028073&#39;,
 &#39;V1028074&#39;,
 &#39;V1028075&#39;,
 &#39;V1028076&#39;,
 &#39;V1028077&#39;,
 &#39;V1028078&#39;,
 &#39;V1028079&#39;,
 &#39;V1028080&#39;,
 &#39;V1028081&#39;,
 &#39;V1028082&#39;,
 &#39;V1028083&#39;,
 &#39;V1028084&#39;,
 &#39;V1028085&#39;,
 &#39;V1028086&#39;,
 &#39;V1028087&#39;,
 &#39;V1028088&#39;,
 &#39;V1028089&#39;,
 &#39;V1028090&#39;,
 &#39;V1028091&#39;,
 &#39;V1028092&#39;,
 &#39;V1028093&#39;,
 &#39;V1028094&#39;,
 &#39;V1028095&#39;,
 &#39;V1028096&#39;,
 &#39;V1028097&#39;,
 &#39;V1028098&#39;,
 &#39;V1028099&#39;,
 &#39;V1028100&#39;,
 &#39;V1028101&#39;,
 &#39;V1028102&#39;,
 &#39;V1028103&#39;,
 &#39;V1028104&#39;,
 &#39;V1028105&#39;,
 &#39;V1028106&#39;,
 &#39;V1028107&#39;,
 &#39;V1028108&#39;,
 &#39;V1028109&#39;,
 &#39;V1028110&#39;,
 &#39;V1028111&#39;,
 &#39;V1028112&#39;,
 &#39;V1028113&#39;,
 &#39;V1028114&#39;,
 &#39;V1028115&#39;,
 &#39;V1028116&#39;,
 &#39;V1028117&#39;,
 &#39;V1028118&#39;,
 &#39;V1028119&#39;,
 &#39;V1028120&#39;,
 &#39;V1028121&#39;,
 &#39;V1028122&#39;,
 &#39;V1028123&#39;,
 &#39;V1028124&#39;,
 &#39;V1028125&#39;,
 &#39;V1028126&#39;,
 &#39;V1028127&#39;,
 &#39;V1028128&#39;,
 &#39;V1028129&#39;,
 &#39;V1028130&#39;,
 &#39;V1028131&#39;,
 &#39;V1028132&#39;,
 &#39;V1028133&#39;,
 &#39;V1028134&#39;,
 &#39;V1028135&#39;,
 &#39;V1028136&#39;,
 &#39;V1028137&#39;,
 &#39;V1028138&#39;,
 &#39;V1028139&#39;,
 &#39;V1028140&#39;,
 &#39;V1028141&#39;,
 &#39;V1028142&#39;,
 &#39;V1028143&#39;,
 &#39;V1028144&#39;,
 &#39;V1028145&#39;,
 &#39;V1028146&#39;,
 &#39;V1028147&#39;,
 &#39;V1028148&#39;,
 &#39;V1028149&#39;,
 &#39;V1028150&#39;,
 &#39;V1028151&#39;,
 &#39;V1028152&#39;,
 &#39;V1028153&#39;,
 &#39;V1028154&#39;,
 &#39;V1028155&#39;,
 &#39;V1028156&#39;,
 &#39;V1028157&#39;,
 &#39;V1028158&#39;,
 &#39;V1028159&#39;,
 &#39;V1028160&#39;,
 &#39;V1028161&#39;,
 &#39;V1028162&#39;,
 &#39;V1028163&#39;,
 &#39;V1028164&#39;,
 &#39;V1028165&#39;,
 &#39;V1028166&#39;,
 &#39;V1028167&#39;,
 &#39;V1028168&#39;,
 &#39;V1028169&#39;,
 &#39;V1028170&#39;,
 &#39;V1028171&#39;,
 &#39;V1028172&#39;,
 &#39;V1028173&#39;,
 &#39;V1028174&#39;,
 &#39;V1028175&#39;,
 &#39;V1028176&#39;,
 &#39;V1028177&#39;,
 &#39;V1028178&#39;,
 &#39;V1028179&#39;,
 &#39;V1028180&#39;,
 &#39;V1028181&#39;,
 &#39;V1028182&#39;,
 &#39;V1028183&#39;,
 &#39;V1028184&#39;,
 &#39;V1028185&#39;,
 &#39;V1028186&#39;,
 &#39;V1028187&#39;,
 &#39;V1028188&#39;,
 &#39;V1028189&#39;,
 &#39;V1028190&#39;,
 &#39;V1028191&#39;,
 &#39;V1028192&#39;,
 &#39;V1028193&#39;,
 &#39;V1028194&#39;,
 &#39;V1028195&#39;,
 &#39;V1028196&#39;,
 &#39;V1028197&#39;,
 &#39;V1028198&#39;,
 &#39;V1028199&#39;,
 &#39;V1028200&#39;,
 &#39;V1029&#39;,
 &#39;V1033&#39;,
 &#39;V2001&#39;,
 &#39;V2003&#39;,
 &#39;V2005&#39;,
 &#39;V2007&#39;,
 &#39;V2008&#39;,
 &#39;V20081&#39;,
 &#39;V20082&#39;,
 &#39;V2009&#39;,
 &#39;V2010&#39;,
 &#39;V3001&#39;,
 &#39;V3002&#39;,
 &#39;V3002A&#39;,
 &#39;V3003&#39;,
 &#39;V3003A&#39;,
 &#39;V3004&#39;,
 &#39;V3005&#39;,
 &#39;V3005A&#39;,
 &#39;V3006&#39;,
 &#39;V3006A&#39;,
 &#39;V3007&#39;,
 &#39;V3008&#39;,
 &#39;V3009&#39;,
 &#39;V3009A&#39;,
 &#39;V3010&#39;,
 &#39;V3011&#39;,
 &#39;V3011A&#39;,
 &#39;V3012&#39;,
 &#39;V3013&#39;,
 &#39;V3013A&#39;,
 &#39;V3013B&#39;,
 &#39;V3014&#39;,
 &#39;V4001&#39;,
 &#39;V4002&#39;,
 &#39;V4003&#39;,
 &#39;V4004&#39;,
 &#39;V4005&#39;,
 &#39;V4006&#39;,
 &#39;V4006A&#39;,
 &#39;V4007&#39;,
 &#39;V4008&#39;,
 &#39;V40081&#39;,
 &#39;V40082&#39;,
 &#39;V40083&#39;,
 &#39;V4009&#39;,
 &#39;V4010&#39;,
 &#39;V4012&#39;,
 &#39;V40121&#39;,
 &#39;V4013&#39;,
 &#39;V40132&#39;,
 &#39;V40132A&#39;,
 &#39;V4014&#39;,
 &#39;V4015&#39;,
 &#39;V40151&#39;,
 &#39;V401511&#39;,
 &#39;V401512&#39;,
 &#39;V4016&#39;,
 &#39;V40161&#39;,
 &#39;V40162&#39;,
 &#39;V40163&#39;,
 &#39;V4017&#39;,
 &#39;V40171&#39;,
 &#39;V401711&#39;,
 &#39;V4018&#39;,
 &#39;V40181&#39;,
 &#39;V40182&#39;,
 &#39;V40183&#39;,
 &#39;V4019&#39;,
 &#39;V4020&#39;,
 &#39;V4021&#39;,
 &#39;V4022&#39;,
 &#39;V4024&#39;,
 &#39;V4025&#39;,
 &#39;V4026&#39;,
 &#39;V4027&#39;,
 &#39;V4028&#39;,
 &#39;V4029&#39;,
 &#39;V4032&#39;,
 &#39;V4033&#39;,
 &#39;V40331&#39;,
 &#39;V403311&#39;,
 &#39;V403312&#39;,
 &#39;V40332&#39;,
 &#39;V403321&#39;,
 &#39;V403322&#39;,
 &#39;V40333&#39;,
 &#39;V403331&#39;,
 &#39;V4034&#39;,
 &#39;V40341&#39;,
 &#39;V403411&#39;,
 &#39;V403412&#39;,
 &#39;V40342&#39;,
 &#39;V403421&#39;,
 &#39;V403422&#39;,
 &#39;V4039&#39;,
 &#39;V4039C&#39;,
 &#39;V4040&#39;,
 &#39;V40401&#39;,
 &#39;V40402&#39;,
 &#39;V40403&#39;,
 &#39;V4041&#39;,
 &#39;V4043&#39;,
 &#39;V40431&#39;,
 &#39;V4044&#39;,
 &#39;V4045&#39;,
 &#39;V4046&#39;,
 &#39;V4047&#39;,
 &#39;V4048&#39;,
 &#39;V4049&#39;,
 &#39;V4050&#39;,
 &#39;V40501&#39;,
 &#39;V405011&#39;,
 &#39;V405012&#39;,
 &#39;V40502&#39;,
 &#39;V405021&#39;,
 &#39;V405022&#39;,
 &#39;V40503&#39;,
 &#39;V405031&#39;,
 &#39;V4051&#39;,
 &#39;V40511&#39;,
 &#39;V405111&#39;,
 &#39;V405112&#39;,
 &#39;V40512&#39;,
 &#39;V405121&#39;,
 &#39;V405122&#39;,
 &#39;V4056&#39;,
 &#39;V4056C&#39;,
 &#39;V4057&#39;,
 &#39;V4058&#39;,
 &#39;V40581&#39;,
 &#39;V405811&#39;,
 &#39;V405812&#39;,
 &#39;V40582&#39;,
 &#39;V405821&#39;,
 &#39;V405822&#39;,
 &#39;V40583&#39;,
 &#39;V405831&#39;,
 &#39;V40584&#39;,
 &#39;V4059&#39;,
 &#39;V40591&#39;,
 &#39;V405911&#39;,
 &#39;V405912&#39;,
 &#39;V40592&#39;,
 &#39;V405921&#39;,
 &#39;V405922&#39;,
 &#39;V4062&#39;,
 &#39;V4062C&#39;,
 &#39;V4063&#39;,
 &#39;V4063A&#39;,
 &#39;V4064&#39;,
 &#39;V4064A&#39;,
 &#39;V4071&#39;,
 &#39;V4072&#39;,
 &#39;V4072A&#39;,
 &#39;V4073&#39;,
 &#39;V4074&#39;,
 &#39;V4074A&#39;,
 &#39;V4075A&#39;,
 &#39;V4075A1&#39;,
 &#39;V4076&#39;,
 &#39;V40761&#39;,
 &#39;V40762&#39;,
 &#39;V40763&#39;,
 &#39;V4077&#39;,
 &#39;V4078&#39;,
 &#39;V4078A&#39;,
 &#39;V4082&#39;,
 &#39;VD2002&#39;,
 &#39;VD2003&#39;,
 &#39;VD2004&#39;,
 &#39;VD2006&#39;,
 &#39;VD3004&#39;,
 &#39;VD3005&#39;,
 &#39;VD3006&#39;,
 &#39;VD4001&#39;,
 &#39;VD4002&#39;,
 &#39;VD4003&#39;,
 &#39;VD4004&#39;,
 &#39;VD4004A&#39;,
 &#39;VD4005&#39;,
 &#39;VD4007&#39;,
 &#39;VD4008&#39;,
 &#39;VD4009&#39;,
 &#39;VD4010&#39;,
 &#39;VD4011&#39;,
 &#39;VD4012&#39;,
 &#39;VD4013&#39;,
 &#39;VD4014&#39;,
 &#39;VD4015&#39;,
 &#39;VD4016&#39;,
 &#39;VD4017&#39;,
 &#39;VD4018&#39;,
 &#39;VD4019&#39;,
 &#39;VD4020&#39;,
 &#39;VD4023&#39;,
 &#39;VD4030&#39;,
 &#39;VD4031&#39;,
 &#39;VD4032&#39;,
 &#39;VD4033&#39;,
 &#39;VD4034&#39;,
 &#39;VD4035&#39;,
 &#39;VD4036&#39;,
 &#39;VD4037&#39;,
 &#39;filename&#39;,
 &#39;posest&#39;,
 &#39;posest_sxi&#39;]
</pre></div>
</div>
</div>
</div>
<p>For the selection of rows from the data, we can use the <code class="docutils literal notranslate"><span class="pre">s4h_data_selector</span></code> method. To use this method we first need to assign the categories of our interest, which can either be one or a set of the following categories:  <code class="docutils literal notranslate"><span class="pre">Business</span></code>, <code class="docutils literal notranslate"><span class="pre">Educations</span></code>, <code class="docutils literal notranslate"><span class="pre">Fertility</span></code>, <code class="docutils literal notranslate"><span class="pre">Housing</span></code>, <code class="docutils literal notranslate"><span class="pre">Identification</span></code>, <code class="docutils literal notranslate"><span class="pre">Migration</span></code>, <code class="docutils literal notranslate"><span class="pre">Nonstandard</span> <span class="pre">job</span></code>, <code class="docutils literal notranslate"><span class="pre">Social</span> <span class="pre">Security</span></code> .This method allows us to <strong>select specific rows</strong> from the data based on the values in a specified column. The <code class="docutils literal notranslate"><span class="pre">key_col</span></code> parameter specifies the column to be used for selection, and the <code class="docutils literal notranslate"><span class="pre">key_val</span></code> parameter specifies the values to be selected. In this case, we will select rows where the value in the <code class="docutils literal notranslate"><span class="pre">UF</span></code> column is equal to <code class="docutils literal notranslate"><span class="pre">14</span></code>, which corresponds to the state of <strong>Pernambuco</strong>. This allows us to filter the data to include only records from this specific state.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>har.categories = [&quot;Business&quot;]
har.key_col = &#39;UF&#39;
har.key_val = [&#39;14&#39;]
filtered_ddfs = har.s4h_data_selector(dfs)
</pre></div>
</div>
</div>
</div>
<p>Finally, we can <strong>join</strong> the filtered dataframes into a <strong>single dataframe</strong> using the <code class="docutils literal notranslate"><span class="pre">s4h_join_data</span></code> method. This method combines the data from the <strong>filtered dataframes</strong> into a <strong>single dataframe</strong>, aligning the columns based on their names. The resulting dataframe will contain all the columns that are present in the filtered dataframes, and it will be ready for further analysis or <strong>export</strong> as a <code class="docutils literal notranslate"><span class="pre">CSV</span></code> file.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython2 notranslate"><div class="highlight"><pre><span></span>joined_df = har.s4h_join_data(filtered_ddfs)
available_cols = joined_df.columns.tolist()
print(f&quot;Available columns: {available_cols}&quot;)
print(f&quot;Shape of the joined DataFrame: {joined_df.shape}&quot;)
print(joined_df.head())
joined_df.to_csv(&#39;data/GEIH_2022_harmonized.csv&#39;, index=False)
</pre></div>
</div>
</div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="extractor.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Extraction of Colombia, Brazil and Peru online data</p>
      </div>
    </a>
    <a class="right-next"
       href="../dictionary.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">How to create a raw dictionary for data harmonization</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-the-enviornment">Setting up the enviornment</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-libraries">Import Libraries</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#extracting-data-from-brazil">Extracting data from Brazil</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#providing-the-raw-dictionary">Providing the raw dictionary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#extracting-the-data">Extracting the data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#harmonizing-the-data">Harmonizing the data</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/notebooks/harmonization.ipynb.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Harmonize.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>